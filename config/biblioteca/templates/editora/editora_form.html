<!-- biblioteca/templates/editora/editora_form.html -->
{% extends 'base.html' %} {% load static %} {% block title %}Adicionar Editora -
BookStack{% endblock %} {% block extra_css %}
<!-- Arquivo CSS exclusivo da página -->
<link rel="stylesheet" href="{% static 'css/editora_form.css' %}" />
{% endblock %} {% block content %}

<!-- Cabeçalho superior com logo e título -->
<div class="top-header">
  <img src="{% static 'img/logo.png' %}" class="logo" alt="Logo BookStack" />
  <h1 class="titulo">Adicionar Editora</h1>
  <!-- Botão para retornar à tela inicial -->
  <a href="{% url 'home' %}" class="back-btn">←</a>
</div>

<!-- Container principal do formulário -->
<div class="container">
  <!-- Formulário responsável por criar a editora -->
  <form action="{% url 'editora-create' %}" method="POST">
    {% csrf_token %}

    <!-- Exibir erros não vinculados a campos específicos -->
    {% if form.non_field_errors %}
    <div class="error-message">
      {% for error in form.non_field_errors %}
      <p>{{ error }}</p>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Grid que organiza os campos em colunas -->
    <div class="form-grid">
      <!-- Campo Nome -->
      <div class="campo">
        <label>Nome da Editora:</label>
        <input type="text" name="nome" required />
      </div>

      <!-- Campo Endereço -->
      <div class="campo">
        <label>Endereço:</label>
        <input type="text" name="endereco" />
      </div>

      <!-- Campo Cidade -->
      <div class="campo">
        <label>Cidade:</label>
        <input type="text" name="cidade" />
      </div>
    </div>

    <!-- Área do botão principal -->
    <div class="btn-area">
      <button type="submit" class="btn-add">Adicionar Editora</button>
    </div>
  </form>
</div>

<!-- POPUP de confirmação após salvar -->
<div id="popup" class="popup hidden">
  <div class="popup-content">
    <!-- Botão para fechar o popup -->
    <button class="popup-close" onclick="fecharPopup()">X</button>

    <!-- Título da mensagem -->
    <h2>Editora Salva <span class="check">✔️</span></h2>

    <!-- Dados exibidos dinamicamente -->
    <p>Id: <span id="popup-id"></span></p>
    <p>Nome da Editora: <span id="popup-nome"></span></p>

    <!-- Botão OK adicional -->
    <button onclick="fecharPopup()" class="btn-add" style="margin-top: 20px">
      OK
    </button>
  </div>
</div>
{% endblock %} {% block scripts %}
<!-- Script do popup -->
<script>
  function abrirPopup(id, nome) {
    document.getElementById("popup-id").innerText = id;
    document.getElementById("popup-nome").innerText = nome;
    document.getElementById("popup").classList.remove("hidden");
  }

  function fecharPopup() {
    document.getElementById("popup").classList.add("hidden");
  }

  // Fechar popup ao clicar fora do conteúdo
  document.getElementById("popup")?.addEventListener("click", function (e) {
    if (e.target === this) {
      fecharPopup();
    }
  });
</script>

<!-- jQuery (necessário para Select2 caso usado em outra parte) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Biblioteca Select2 -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- Se a operação foi concluída com sucesso, abre o popup -->
{% if sucesso %}
<script>
  abrirPopup("{{ editora_id }}", "{{ editora_nome }}");
</script>
{% endif %} {% endblock %}
